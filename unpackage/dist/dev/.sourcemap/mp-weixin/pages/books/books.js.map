{"version":3,"file":"books.js","sources":["pages/books/books.vue","F:/HBuilderX.4.75.2025071105/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYm9va3MvYm9va3MudnVl"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"header\">\r\n      <view class=\"title\">选择学习书籍</view>\r\n      <view class=\"subtitle\">{{ bookList.length }}本书籍可供选择</view>\r\n    </view>\r\n    \r\n    <view class=\"books-list\">\r\n      <view \r\n        v-for=\"book in bookList\" \r\n        :key=\"book.id\"\r\n        class=\"book-card\"\r\n        :class=\"{ 'active': currentBook.id === book.id }\"\r\n        :style=\"{ background: `linear-gradient(135deg, ${book.color}99, ${book.color}dd)` }\"\r\n        @click=\"selectBook(book)\"\r\n      >\r\n        <view class=\"book-cover\">{{ book.cover }}</view>\r\n        <view class=\"book-info\">\r\n          <view class=\"book-title\">{{ book.title }}</view>\r\n          <view class=\"book-subtitle\">{{ book.subtitle }}</view>\r\n          <view class=\"book-desc\">{{ book.description }}</view>\r\n          <view class=\"book-meta\">\r\n            <view class=\"difficulty\">{{ book.difficulty }}</view>\r\n            <view class=\"word-count\">{{ book.wordCount }}词</view>\r\n          </view>\r\n        </view>\r\n        <view class=\"book-progress\">\r\n          <view class=\"progress-info\">\r\n            <text>学习进度：{{ getBookProgressPercent(book.id) }}%</text>\r\n            <text>错题：{{ getBookWrongCount(book.id) }}</text>\r\n          </view>\r\n          <view class=\"progress-bar\">\r\n            <view \r\n              class=\"progress-fill\"\r\n              :style=\"{ width: getBookProgressPercent(book.id) + '%' }\"\r\n            ></view>\r\n          </view>\r\n        </view>\r\n        <view v-if=\"currentBook.id === book.id\" class=\"selected-mark\">\r\n          <text>✓</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 快速切换区域 -->\r\n    <view class=\"quick-actions\">\r\n      <view class=\"section-title\">快速操作</view>\r\n      <view class=\"actions-grid\">\r\n        <view class=\"action-item\" @click=\"showAllProgress\">\r\n          <view class=\"action-icon\">📊</view>\r\n          <view class=\"action-text\">总体进度</view>\r\n        </view>\r\n        <view class=\"action-item\" @click=\"resetAllProgress\">\r\n          <view class=\"action-icon\">🔄</view>\r\n          <view class=\"action-text\">重置所有</view>\r\n        </view>\r\n        <view class=\"action-item\" @click=\"exportProgress\">\r\n          <view class=\"action-icon\">📤</view>\r\n          <view class=\"action-text\">导出数据</view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n  bookList, \r\n  getCurrentBook, \r\n  setCurrentBook, \r\n  getBookProgress,\r\n  saveBookProgress,\r\n  getCurrentBookWords\r\n} from '@/utils/bookData.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      bookList,\r\n      currentBook: {}\r\n    }\r\n  },\r\n  onLoad() {\r\n    this.currentBook = getCurrentBook()\r\n  },\r\n  onShow() {\r\n    this.currentBook = getCurrentBook()\r\n  },\r\n  methods: {\r\n    selectBook(book) {\r\n      if (this.currentBook.id === book.id) return\r\n      \r\n      // 切换书籍\r\n      setCurrentBook(book.id)\r\n      this.currentBook = book\r\n      \r\n      uni.showToast({\r\n        title: `已切换到《${book.title}》`,\r\n        icon: 'success'\r\n      })\r\n      \r\n      // 延时切换到学习页面\r\n      setTimeout(() => {\r\n        uni.switchTab({\r\n          url: '/pages/index/index'\r\n        })\r\n      }, 1000)\r\n    },\r\n    \r\n    getBookProgressPercent(bookId) {\r\n      const progress = getBookProgress(bookId)\r\n      const bookWords = this.getBookWordsCount(bookId)\r\n      if (bookWords === 0) return 0\r\n      return Math.round((progress.learnedWords.length / bookWords) * 100)\r\n    },\r\n    \r\n    getBookWrongCount(bookId) {\r\n      const progress = getBookProgress(bookId)\r\n      return progress.wrongWords.length\r\n    },\r\n    \r\n    getBookWordsCount(bookId) {\r\n      const book = bookList.find(b => b.id === bookId)\r\n      return book ? book.wordCount : 0\r\n    },\r\n    \r\n    showAllProgress() {\r\n      let progressText = '📚 总体学习进度：\\n\\n'\r\n      \r\n      bookList.forEach(book => {\r\n        const percent = this.getBookProgressPercent(book.id)\r\n        const wrongCount = this.getBookWrongCount(book.id)\r\n        progressText += `${book.title}\\n进度：${percent}% | 错题：${wrongCount}个\\n\\n`\r\n      })\r\n      \r\n      uni.showModal({\r\n        title: '学习统计',\r\n        content: progressText,\r\n        showCancel: false\r\n      })\r\n    },\r\n    \r\n    resetAllProgress() {\r\n      uni.showModal({\r\n        title: '重置所有数据',\r\n        content: '确定要重置所有书籍的学习进度吗？此操作不可恢复。',\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            bookList.forEach(book => {\r\n              const emptyProgress = {\r\n                learnedWords: [],\r\n                wrongWords: [],\r\n                reviewWords: []\r\n              }\r\n              saveBookProgress(book.id, emptyProgress)\r\n            })\r\n            \r\n            uni.showToast({\r\n              title: '重置成功',\r\n              icon: 'success'\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    \r\n    exportProgress() {\r\n      let exportData = {\r\n        exportTime: new Date().toLocaleString(),\r\n        books: {}\r\n      }\r\n      \r\n      bookList.forEach(book => {\r\n        const progress = getBookProgress(book.id)\r\n        exportData.books[book.id] = {\r\n          title: book.title,\r\n          progress: progress,\r\n          progressPercent: this.getBookProgressPercent(book.id)\r\n        }\r\n      })\r\n      \r\n      // 转换为JSON字符串\r\n      const jsonStr = JSON.stringify(exportData, null, 2)\r\n      \r\n      uni.showModal({\r\n        title: '导出数据',\r\n        content: '学习数据已生成，请复制保存。',\r\n        showCancel: false,\r\n        success: () => {\r\n          // 这里可以根据需要实现复制到剪贴板功能\r\n          console.log('Export data:', jsonStr)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\r\n  padding: 40rpx;\r\n}\r\n\r\n.header {\r\n  text-align: center;\r\n  margin-bottom: 60rpx;\r\n  color: white;\r\n}\r\n\r\n.title {\r\n  font-size: 56rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.subtitle {\r\n  font-size: 28rpx;\r\n  opacity: 0.9;\r\n}\r\n\r\n.books-list {\r\n  margin-bottom: 60rpx;\r\n}\r\n\r\n.book-card {\r\n  margin-bottom: 30rpx;\r\n  border-radius: 24rpx;\r\n  overflow: hidden;\r\n  position: relative;\r\n  backdrop-filter: blur(10px);\r\n  border: 2rpx solid rgba(255, 255, 255, 0.2);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.book-card.active {\r\n  border-color: #FFD700;\r\n  box-shadow: 0 0 30rpx rgba(255, 215, 0, 0.5);\r\n  transform: scale(1.02);\r\n}\r\n\r\n.book-card:active {\r\n  transform: scale(0.98);\r\n}\r\n\r\n.book-cover {\r\n  font-size: 80rpx;\r\n  text-align: center;\r\n  padding: 40rpx 0 20rpx 0;\r\n}\r\n\r\n.book-info {\r\n  padding: 0 40rpx 30rpx 40rpx;\r\n  color: white;\r\n}\r\n\r\n.book-title {\r\n  font-size: 42rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.book-subtitle {\r\n  font-size: 28rpx;\r\n  opacity: 0.9;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.book-desc {\r\n  font-size: 26rpx;\r\n  opacity: 0.8;\r\n  line-height: 1.5;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.book-meta {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.difficulty {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  padding: 8rpx 16rpx;\r\n  border-radius: 20rpx;\r\n  font-size: 22rpx;\r\n}\r\n\r\n.word-count {\r\n  font-size: 24rpx;\r\n  opacity: 0.8;\r\n}\r\n\r\n.book-progress {\r\n  padding: 20rpx 40rpx 30rpx 40rpx;\r\n  background: rgba(0, 0, 0, 0.1);\r\n  color: white;\r\n}\r\n\r\n.progress-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.progress-bar {\r\n  height: 8rpx;\r\n  background: rgba(255, 255, 255, 0.3);\r\n  border-radius: 4rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.progress-fill {\r\n  height: 100%;\r\n  background: #FFD700;\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.selected-mark {\r\n  position: absolute;\r\n  top: 20rpx;\r\n  right: 20rpx;\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  background: #FFD700;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 32rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n}\r\n\r\n.quick-actions {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 20rpx;\r\n  padding: 40rpx;\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: white;\r\n  margin-bottom: 30rpx;\r\n  text-align: center;\r\n}\r\n\r\n.actions-grid {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  gap: 20rpx;\r\n}\r\n\r\n.action-item {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 30rpx 20rpx;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 15rpx;\r\n  border: 1rpx solid rgba(255, 255, 255, 0.2);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.action-item:active {\r\n  transform: scale(0.95);\r\n  background: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.action-icon {\r\n  font-size: 40rpx;\r\n  margin-bottom: 15rpx;\r\n}\r\n\r\n.action-text {\r\n  font-size: 24rpx;\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n</style> ","import MiniProgramPage from 'G:/常嘉硕/大学/中南大学/意大利语/WechatMiniTest/记意 Parli/pages/books/books.vue'\nwx.createPage(MiniProgramPage)"],"names":["bookList","getCurrentBook","setCurrentBook","uni","getBookProgress","saveBookProgress"],"mappings":"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"}