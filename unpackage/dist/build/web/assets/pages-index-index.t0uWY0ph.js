import{$ as t,a as s,n as e,s as a,b as o,h as l,c as n,w as r,i as u,o as c,d as i,e as d,t as g,f,g as _}from"./index-B7OQiFPg.js";import{g as b,a as p,b as h}from"./bookData.ioIksG53.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=w({data:()=>({currentBook:{},learnedCount:0,wrongCount:0,progressPercent:0}),computed:{suggestion(){return this.wrongCount>0?`您有 ${this.wrongCount} 个错题需要复习，建议先复习巩固！`:this.learnedCount<10?"开始您的意大利语学习之旅吧！":this.progressPercent<50?"学习进展不错，继续保持！":this.progressPercent<100?"已经学习了一大半，加油完成这本书！":"恭喜完成这本书！可以尝试其他书籍或进行随机抽查！"}},onShow(){this.loadStats()},onLoad(){t("learningComplete",(()=>{this.loadStats()}))},onUnload(){s("learningComplete")},methods:{async loadStats(){try{this.currentBook=await b();const t=await p(),s=await h();this.learnedCount=t.length,this.wrongCount=s.length,this.currentBook&&this.currentBook.wordCount>0?this.progressPercent=Math.round(this.learnedCount/this.currentBook.wordCount*100):this.progressPercent=0}catch(t){console.error("加载统计数据失败:",t),this.learnedCount=0,this.wrongCount=0,this.progressPercent=0,this.currentBook={title:"意大利语词典",wordCount:0,cover:"📖"}}},goLearn(){e({url:"/pages/learn/learn"})},goReview(){0!==this.wrongCount?e({url:"/pages/review/review"}):a({title:"暂无错题需要复习",icon:"none"})},goQuiz(){e({url:"/pages/quiz/quiz"})},goWordList(t){"all"===t?(o({title:"加载中..."}),setTimeout((()=>{l(),e({url:`/pages/wordList/wordList?type=${t}`})}),300)):e({url:`/pages/wordList/wordList?type=${t}`})}}},[["render",function(t,s,e,a,o,l){const b=u;return c(),n(b,{class:"container"},{default:r((()=>[i(b,{class:"header"},{default:r((()=>[i(b,{class:"app-title"},{default:r((()=>[d("记意 Parli")])),_:1}),i(b,{class:"subtitle"},{default:r((()=>[d("意大利语背单词")])),_:1})])),_:1}),i(b,{class:"current-book-section"},{default:r((()=>[i(b,{class:"book-info"},{default:r((()=>[i(b,{class:"book-cover"},{default:r((()=>[d(g(o.currentBook.cover),1)])),_:1}),i(b,{class:"book-details"},{default:r((()=>[i(b,{class:"book-title"},{default:r((()=>[d(g(o.currentBook.title),1)])),_:1}),i(b,{class:"book-subtitle"},{default:r((()=>[d(g(o.currentBook.subtitle),1)])),_:1}),i(b,{class:"book-progress"},{default:r((()=>[i(b,{class:"progress-bar"},{default:r((()=>[i(b,{class:"progress-fill",style:f({width:o.progressPercent+"%"})},null,8,["style"])])),_:1}),i(b,{class:"progress-text"},{default:r((()=>[d(g(o.progressPercent)+"% 完成",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),i(b,{class:"stats-container"},{default:r((()=>[i(b,{class:"stat-card",onClick:s[0]||(s[0]=t=>l.goWordList("learned"))},{default:r((()=>[i(b,{class:"stat-number"},{default:r((()=>[d(g(o.learnedCount),1)])),_:1}),i(b,{class:"stat-label"},{default:r((()=>[d("已学单词")])),_:1})])),_:1}),i(b,{class:"stat-card",onClick:s[1]||(s[1]=t=>l.goWordList("wrong"))},{default:r((()=>[i(b,{class:"stat-number"},{default:r((()=>[d(g(o.wrongCount),1)])),_:1}),i(b,{class:"stat-label"},{default:r((()=>[d("错题数量")])),_:1})])),_:1}),i(b,{class:"stat-card"},{default:r((()=>[i(b,{class:"stat-number"},{default:r((()=>[d(g(o.currentBook.wordCount),1)])),_:1}),i(b,{class:"stat-label"},{default:r((()=>[d("总单词数")])),_:1})])),_:1})])),_:1}),i(b,{class:"buttons-container"},{default:r((()=>[i(b,{class:"main-button learn-btn",onClick:l.goLearn},{default:r((()=>[i(b,{class:"button-icon"},{default:r((()=>[d("📚")])),_:1}),i(b,{class:"button-text"},{default:r((()=>[i(b,{class:"button-title"},{default:r((()=>[d("开始学习")])),_:1}),i(b,{class:"button-desc"},{default:r((()=>[d("学习新单词")])),_:1})])),_:1})])),_:1},8,["onClick"]),i(b,{class:"main-button review-btn",onClick:l.goReview},{default:r((()=>[i(b,{class:"button-icon"},{default:r((()=>[d("🔄")])),_:1}),i(b,{class:"button-text"},{default:r((()=>[i(b,{class:"button-title"},{default:r((()=>[d("复习模式")])),_:1}),i(b,{class:"button-desc"},{default:r((()=>[d("复习错题 ("+g(o.wrongCount)+")",1)])),_:1})])),_:1})])),_:1},8,["onClick"]),i(b,{class:"main-button quiz-btn",onClick:l.goQuiz},{default:r((()=>[i(b,{class:"button-icon"},{default:r((()=>[d("🎯")])),_:1}),i(b,{class:"button-text"},{default:r((()=>[i(b,{class:"button-title"},{default:r((()=>[d("随机抽查")])),_:1}),i(b,{class:"button-desc"},{default:r((()=>[d("检验学习成果")])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1}),l.suggestion?(c(),n(b,{key:0,class:"suggestion-container"},{default:r((()=>[i(b,{class:"suggestion-icon"},{default:r((()=>[d("💡")])),_:1}),i(b,{class:"suggestion-text"},{default:r((()=>[d(g(l.suggestion),1)])),_:1})])),_:1})):_("",!0)])),_:1})}],["__scopeId","data-v-c2dd45d0"]]);export{C as default};
