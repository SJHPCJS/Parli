import{s as a,Q as s,C as e,A as r,c as o,w as l,i as t,o as i,d as n,e as d,m,t as u,g as c,p as f,I as h,z as p}from"./index-B7OQiFPg.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=g({data:()=>({formData:{username:"",nickname:"",password:"",confirmPassword:""},errors:{username:"",nickname:"",password:"",confirmPassword:""},loading:!1}),computed:{isFormValid(){return this.formData.username.length>=3&&this.formData.nickname.length>=2&&this.formData.password.length>=6&&this.formData.confirmPassword===this.formData.password&&!this.hasErrors},hasErrors(){return Object.values(this.errors).some((a=>""!==a))}},methods:{validateUsername(){this.formData.username?this.formData.username.length<3?this.errors.username="用户名至少3个字符":/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(this.formData.username)?this.errors.username="":this.errors.username="用户名只能包含字母、数字、下划线和中文":this.errors.username="用户名不能为空"},validateNickname(){this.formData.nickname?this.formData.nickname.length<2?this.errors.nickname="昵称至少2个字符":this.errors.nickname="":this.errors.nickname="昵称不能为空"},validatePassword(){this.formData.password?this.formData.password.length<6?this.errors.password="密码至少6个字符":(this.errors.password="",this.formData.confirmPassword&&this.validateConfirmPassword()):this.errors.password="密码不能为空"},validateConfirmPassword(){this.formData.confirmPassword?this.formData.confirmPassword!==this.formData.password?this.errors.confirmPassword="两次输入的密码不一致":this.errors.confirmPassword="":this.errors.confirmPassword="请确认密码"},validateAllFields(){this.validateUsername(),this.validateNickname(),this.validatePassword(),this.validateConfirmPassword()},async handleRegister(){if(this.validateAllFields(),this.isFormValid){this.loading=!0;try{const r=await s(this.formData.username,this.formData.password,this.formData.nickname);r.success?(a({title:r.message,icon:"success"}),setTimeout((()=>{e({url:"/pages/login/login"})}),1500)):a({title:r.message,icon:"none",duration:3e3})}catch(r){console.error("注册失败:",r),a({title:"注册失败，请重试",icon:"none"})}finally{this.loading=!1}}else a({title:"请检查输入信息",icon:"none"})},goToLogin(){r()}}},[["render",function(a,s,e,r,g,w){const _=t,k=f,D=h,P=p;return i(),o(_,{class:"register-container"},{default:l((()=>[n(_,{class:"header"},{default:l((()=>[n(_,{class:"app-logo"},{default:l((()=>[d("📖")])),_:1}),n(_,{class:"app-title"},{default:l((()=>[d("记意 Parli")])),_:1}),n(_,{class:"app-subtitle"},{default:l((()=>[d("创建您的学习账户")])),_:1})])),_:1}),n(_,{class:"register-form"},{default:l((()=>[n(_,{class:"form-title"},{default:l((()=>[d("用户注册")])),_:1}),n(_,{class:"input-group"},{default:l((()=>[n(_,{class:"input-label"},{default:l((()=>[n(k,{class:"input-icon"},{default:l((()=>[d("👤")])),_:1}),n(k,null,{default:l((()=>[d("用户名")])),_:1})])),_:1}),n(D,{modelValue:g.formData.username,"onUpdate:modelValue":s[0]||(s[0]=a=>g.formData.username=a),class:m(["form-input",{error:g.errors.username}]),placeholder:"请输入用户名（至少3个字符）",disabled:g.loading,maxlength:"20",onBlur:w.validateUsername},null,8,["modelValue","class","disabled","onBlur"]),g.errors.username?(i(),o(k,{key:0,class:"error-text"},{default:l((()=>[d(u(g.errors.username),1)])),_:1})):c("",!0)])),_:1}),n(_,{class:"input-group"},{default:l((()=>[n(_,{class:"input-label"},{default:l((()=>[n(k,{class:"input-icon"},{default:l((()=>[d("😊")])),_:1}),n(k,null,{default:l((()=>[d("昵称")])),_:1})])),_:1}),n(D,{modelValue:g.formData.nickname,"onUpdate:modelValue":s[1]||(s[1]=a=>g.formData.nickname=a),class:m(["form-input",{error:g.errors.nickname}]),placeholder:"请输入昵称（至少2个字符）",disabled:g.loading,maxlength:"20",onBlur:w.validateNickname},null,8,["modelValue","class","disabled","onBlur"]),g.errors.nickname?(i(),o(k,{key:0,class:"error-text"},{default:l((()=>[d(u(g.errors.nickname),1)])),_:1})):c("",!0)])),_:1}),n(_,{class:"input-group"},{default:l((()=>[n(_,{class:"input-label"},{default:l((()=>[n(k,{class:"input-icon"},{default:l((()=>[d("🔒")])),_:1}),n(k,null,{default:l((()=>[d("密码")])),_:1})])),_:1}),n(D,{modelValue:g.formData.password,"onUpdate:modelValue":s[2]||(s[2]=a=>g.formData.password=a),class:m(["form-input",{error:g.errors.password}]),placeholder:"请输入密码（至少6个字符）",password:"",disabled:g.loading,maxlength:"50",onBlur:w.validatePassword},null,8,["modelValue","class","disabled","onBlur"]),g.errors.password?(i(),o(k,{key:0,class:"error-text"},{default:l((()=>[d(u(g.errors.password),1)])),_:1})):c("",!0)])),_:1}),n(_,{class:"input-group"},{default:l((()=>[n(_,{class:"input-label"},{default:l((()=>[n(k,{class:"input-icon"},{default:l((()=>[d("🔓")])),_:1}),n(k,null,{default:l((()=>[d("确认密码")])),_:1})])),_:1}),n(D,{modelValue:g.formData.confirmPassword,"onUpdate:modelValue":s[3]||(s[3]=a=>g.formData.confirmPassword=a),class:m(["form-input",{error:g.errors.confirmPassword}]),placeholder:"请再次输入密码",password:"",disabled:g.loading,maxlength:"50",onBlur:w.validateConfirmPassword},null,8,["modelValue","class","disabled","onBlur"]),g.errors.confirmPassword?(i(),o(k,{key:0,class:"error-text"},{default:l((()=>[d(u(g.errors.confirmPassword),1)])),_:1})):c("",!0)])),_:1}),n(_,{class:"form-actions"},{default:l((()=>[n(P,{class:m(["register-btn",{loading:g.loading}]),disabled:g.loading||!w.isFormValid,onClick:w.handleRegister},{default:l((()=>[g.loading?(i(),o(k,{key:0},{default:l((()=>[d("注册中...")])),_:1})):(i(),o(k,{key:1},{default:l((()=>[d("注册")])),_:1}))])),_:1},8,["class","disabled","onClick"]),n(_,{class:"form-links"},{default:l((()=>[n(k,{class:"link-text",onClick:w.goToLogin},{default:l((()=>[d("已有账号？立即登录")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),n(_,{class:"footer"},{default:l((()=>[n(k,{class:"footer-text"},{default:l((()=>[d("注册即表示您同意我们的服务条款")])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-80e65f88"]]);export{w as default};
