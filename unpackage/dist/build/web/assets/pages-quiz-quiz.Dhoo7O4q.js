import{j as t,c as s,w as e,i as l,o as a,d as i,e as u,t as n,g as r,f as c,l as o,r as d,F as h,m as p,z as f,p as _,I as g}from"./index-B7OQiFPg.js";import{p as m,g as R,m as z,n as k}from"./bookData.ioIksG53.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=w({data:()=>({currentBook:{},quizWords:[],isQuizStarted:!1,isQuizCompleted:!1,currentIndex:0,step:1,current:{},options:[],selectedOption:-1,showResult:!1,step1Result:!1,userInput:"",showSpellingResult:!1,spellingResult:!1,quizResults:[],correctCount:0,posMap:m}),computed:{progressWidth(){return this.quizWords.length>0?this.currentIndex/this.quizWords.length*100:0},accuracy(){return this.quizWords.length>0?this.correctCount/this.quizWords.length*100:0},isLastQuestion(){return this.currentIndex===this.quizWords.length-1}},onLoad(){this.initQuiz()},methods:{initQuiz(){this.currentBook=R(),this.quizWords=z(10),this.isQuizStarted=!1,this.isQuizCompleted=!1,this.currentIndex=0,this.quizResults=[],this.correctCount=0},startQuiz(){0!==this.quizWords.length&&(this.isQuizStarted=!0,this.loadQuestion())},loadQuestion(){this.currentIndex>=this.quizWords.length?this.completeQuiz():(this.current=this.quizWords[this.currentIndex],this.generateOptions(),this.resetState())},generateOptions(){const t=k().filter((t=>t.id!==this.current.id)).sort((()=>.5-Math.random())).slice(0,2);this.options=[this.current,...t].sort((()=>.5-Math.random()))},resetState(){this.step=1,this.selectedOption=-1,this.showResult=!1,this.step1Result=!1,this.userInput="",this.showSpellingResult=!1,this.spellingResult=!1},selectOption(t,s){this.showResult||(this.selectedOption=t,this.step1Result=s.id===this.current.id,this.showResult=!0,this.step1Result||setTimeout((()=>{this.showResult=!1,this.selectedOption=-1}),2e3))},goToStep2(){this.step=2,this.showResult=!1},checkSpelling(){if(!this.userInput.trim())return;this.spellingResult=this.userInput.trim().toLowerCase()===this.current.word.toLowerCase(),this.showSpellingResult=!0;const t=this.step1Result&&this.spellingResult;t&&this.correctCount++,this.quizResults.push({word:this.current.word,meaning:this.current.meaning,correct:t,step1Correct:this.step1Result,step2Correct:this.spellingResult})},clearSpellingResult(){this.showSpellingResult=!1},nextQuestion(){this.currentIndex++,this.loadQuestion()},completeQuiz(){this.isQuizCompleted=!0,this.isQuizStarted=!1},retryQuiz(){this.initQuiz()},goBack(){t({url:"/pages/index/index"})},getResultIcon(){return this.accuracy>=90?"🎉":this.accuracy>=70?"👍":this.accuracy>=50?"😊":"💪"},getResultComment(){return this.accuracy>=90?"优秀！掌握得很好！":this.accuracy>=70?"不错！继续加油！":this.accuracy>=50?"还可以，需要多练习":"需要加强学习哦"}}},[["render",function(t,m,R,z,k,w){const C=l,Q=f,q=_,x=g;return a(),s(C,{class:"container"},{default:e((()=>[k.isQuizStarted?r("",!0):(a(),s(C,{key:0,class:"start-screen"},{default:e((()=>[i(C,{class:"quiz-header"},{default:e((()=>[i(C,{class:"quiz-title"},{default:e((()=>[u("随机抽查")])),_:1}),i(C,{class:"quiz-subtitle"},{default:e((()=>[u("检验你的学习成果")])),_:1})])),_:1}),i(C,{class:"quiz-info"},{default:e((()=>[i(C,{class:"info-item"},{default:e((()=>[i(C,{class:"info-icon"},{default:e((()=>[u("📚")])),_:1}),i(C,{class:"info-text"},{default:e((()=>[u("当前书籍：《"+n(k.currentBook.title)+"》",1)])),_:1})])),_:1}),i(C,{class:"info-item"},{default:e((()=>[i(C,{class:"info-icon"},{default:e((()=>[u("🎯")])),_:1}),i(C,{class:"info-text"},{default:e((()=>[u("测试数量："+n(k.quizWords.length)+"个单词",1)])),_:1})])),_:1}),i(C,{class:"info-item"},{default:e((()=>[i(C,{class:"info-icon"},{default:e((()=>[u("⏰")])),_:1}),i(C,{class:"info-text"},{default:e((()=>[u("测试模式：选择 + 拼写")])),_:1})])),_:1})])),_:1}),i(C,{class:"start-actions"},{default:e((()=>[i(Q,{class:"start-btn",onClick:w.startQuiz,disabled:0===k.quizWords.length},{default:e((()=>[u(n(0===k.quizWords.length?"暂无可测试单词":"开始测试"),1)])),_:1},8,["onClick","disabled"]),i(Q,{class:"back-btn",onClick:w.goBack},{default:e((()=>[u("返回首页")])),_:1},8,["onClick"])])),_:1})])),_:1})),k.isQuizStarted&&!k.isQuizCompleted?(a(),s(C,{key:1,class:"quiz-screen"},{default:e((()=>[i(C,{class:"progress-bar"},{default:e((()=>[i(C,{class:"progress-fill",style:c({width:w.progressWidth+"%"})},null,8,["style"])])),_:1}),i(C,{class:"progress-text"},{default:e((()=>[u("第"+n(k.currentIndex+1)+"题 / 共"+n(k.quizWords.length)+"题",1)])),_:1}),1===k.step?(a(),s(C,{key:0,class:"step-container"},{default:e((()=>[i(C,{class:"title"},{default:e((()=>[u("选择正确的词性和意思")])),_:1}),i(C,{class:"word-display"},{default:e((()=>[u(n(k.current.word),1)])),_:1}),i(C,{class:"options-container"},{default:e((()=>[(a(!0),o(h,null,d(k.options,((t,l)=>(a(),s(C,{key:l,class:p(["option",{selected:k.selectedOption===l,correct:k.showResult&&t.id===k.current.id,wrong:k.showResult&&k.selectedOption===l&&t.id!==k.current.id}]),onClick:s=>w.selectOption(l,t)},{default:e((()=>[i(C,{class:"option-text"},{default:e((()=>[i(q,{class:"pos-tag"},{default:e((()=>[u(n(k.posMap[t.pos]),1)])),_:2},1024),i(q,{class:"meaning"},{default:e((()=>[u(n(t.meaning),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),k.showResult?(a(),s(C,{key:0,class:"result-container"},{default:e((()=>[i(C,{class:p(["result-text",{correct:k.step1Result,wrong:!k.step1Result}])},{default:e((()=>[u(n(k.step1Result?"正确！继续下一步":"错误！请重新选择"),1)])),_:1},8,["class"]),k.step1Result?(a(),s(Q,{key:0,class:"next-btn",onClick:w.goToStep2},{default:e((()=>[u("下一步：拼写练习")])),_:1},8,["onClick"])):r("",!0)])),_:1})):r("",!0)])),_:1})):r("",!0),2===k.step?(a(),s(C,{key:1,class:"step-container"},{default:e((()=>[i(C,{class:"title"},{default:e((()=>[u("请拼写这个单词")])),_:1}),i(C,{class:"clue-container"},{default:e((()=>[i(C,{class:"clue"},{default:e((()=>[i(q,{class:"pos-tag"},{default:e((()=>[u(n(k.posMap[k.current.pos]),1)])),_:1}),i(q,{class:"meaning"},{default:e((()=>[u(n(k.current.meaning),1)])),_:1})])),_:1})])),_:1}),i(C,{class:"input-container"},{default:e((()=>[i(x,{modelValue:k.userInput,"onUpdate:modelValue":m[0]||(m[0]=t=>k.userInput=t),placeholder:"请输入意大利语单词",class:p(["input",{correct:k.showSpellingResult&&k.spellingResult,wrong:k.showSpellingResult&&!k.spellingResult}]),onInput:w.clearSpellingResult},null,8,["modelValue","class","onInput"]),i(Q,{class:"submit-btn",onClick:w.checkSpelling,disabled:!k.userInput.trim()},{default:e((()=>[u("提交")])),_:1},8,["onClick","disabled"])])),_:1}),k.showSpellingResult?(a(),s(C,{key:0,class:"result-container"},{default:e((()=>[i(C,{class:p(["result-text",{correct:k.spellingResult,wrong:!k.spellingResult}])},{default:e((()=>[u(n(k.spellingResult?"正确！":`错误！正确答案是：${k.current.word}`),1)])),_:1},8,["class"]),i(Q,{class:"next-btn",onClick:w.nextQuestion},{default:e((()=>[u(n(w.isLastQuestion?"完成测试":"下一题"),1)])),_:1},8,["onClick"])])),_:1})):r("",!0)])),_:1})):r("",!0)])),_:1})):r("",!0),k.isQuizCompleted?(a(),s(C,{key:2,class:"result-screen"},{default:e((()=>[i(C,{class:"result-header"},{default:e((()=>[i(C,{class:"result-icon"},{default:e((()=>[u(n(w.getResultIcon()),1)])),_:1}),i(C,{class:"result-title"},{default:e((()=>[u("测试完成！")])),_:1}),i(C,{class:"result-subtitle"},{default:e((()=>[u(n(w.getResultComment()),1)])),_:1})])),_:1}),i(C,{class:"result-stats"},{default:e((()=>[i(C,{class:"stat-card"},{default:e((()=>[i(C,{class:"stat-number"},{default:e((()=>[u(n(k.quizWords.length),1)])),_:1}),i(C,{class:"stat-label"},{default:e((()=>[u("测试题数")])),_:1})])),_:1}),i(C,{class:"stat-card"},{default:e((()=>[i(C,{class:"stat-number"},{default:e((()=>[u(n(k.correctCount),1)])),_:1}),i(C,{class:"stat-label"},{default:e((()=>[u("正确题数")])),_:1})])),_:1}),i(C,{class:"stat-card"},{default:e((()=>[i(C,{class:"stat-number"},{default:e((()=>[u(n(Math.round(w.accuracy))+"%",1)])),_:1}),i(C,{class:"stat-label"},{default:e((()=>[u("正确率")])),_:1})])),_:1})])),_:1}),i(C,{class:"result-details"},{default:e((()=>[i(C,{class:"details-title"},{default:e((()=>[u("详细结果")])),_:1}),i(C,{class:"details-list"},{default:e((()=>[(a(!0),o(h,null,d(k.quizResults,((t,l)=>(a(),s(C,{key:l,class:p(["detail-item",{correct:t.correct,wrong:!t.correct}])},{default:e((()=>[i(C,{class:"detail-word"},{default:e((()=>[u(n(t.word),1)])),_:2},1024),i(C,{class:"detail-meaning"},{default:e((()=>[u(n(t.meaning),1)])),_:2},1024),i(C,{class:"detail-status"},{default:e((()=>[u(n(t.correct?"✓":"✗"),1)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})])),_:1}),i(C,{class:"result-actions"},{default:e((()=>[i(Q,{class:"retry-btn",onClick:w.retryQuiz},{default:e((()=>[u("再测一次")])),_:1},8,["onClick"]),i(Q,{class:"home-btn",onClick:w.goBack},{default:e((()=>[u("返回首页")])),_:1},8,["onClick"])])),_:1})])),_:1})):r("",!0)])),_:1})}],["__scopeId","data-v-62c13553"]]);export{C as default};
