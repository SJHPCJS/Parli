import{H as a,k as e,s,O as l,P as t,y as o,n as i,c as n,w as d,i as r,o as c,d as u,e as f,m,p,I as g,z as _}from"./index-B7OQiFPg.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=h({data:()=>({formData:{username:"",password:""},loading:!1}),computed:{isFormValid(){return this.formData.username.length>=3&&this.formData.password.length>=6}},methods:{checkTempData:()=>a("learned_words_book_1",[]).length>0||a("wrong_words_book_1",[]).length>0,showMigrationPrompt:async()=>new Promise((a=>{e({title:"å‘ç°æœ¬åœ°å­¦ä¹ æ•°æ®",content:"æ£€æµ‹åˆ°æ‚¨ä¹‹å‰åœ¨æœªç™»å½•çŠ¶æ€ä¸‹å­¦ä¹ äº†ä¸€äº›å•è¯ï¼Œæ˜¯å¦è¦å°†è¿™äº›å­¦ä¹ è®°å½•å¯¼å…¥åˆ°æ‚¨çš„è´¦æˆ·ä¸­ï¼Ÿ",confirmText:"å¯¼å…¥æ•°æ®",cancelText:"å¿½ç•¥",success:e=>{a(e.confirm)}})})),async handleLogin(){if(this.isFormValid){this.loading=!0;try{const e=await l(this.formData.username,this.formData.password);if(e.success){if(this.checkTempData()){if(await this.showMigrationPrompt())try{const a=await t();a.success?s({title:a.message,icon:"success"}):s({title:a.message,icon:"none"})}catch(a){console.error("æ•°æ®è¿ç§»å¤±è´¥:",a),s({title:"æ•°æ®å¯¼å…¥å¤±è´¥ï¼Œä½†ç™»å½•æˆåŠŸ",icon:"none"})}}else s({title:e.message,icon:"success"});setTimeout((()=>{o({url:"/pages/index/index"})}),2e3)}else s({title:e.message,icon:"none",duration:3e3})}catch(a){console.error("ç™»å½•å¤±è´¥:",a),s({title:"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}finally{this.loading=!1}}else s({title:"è¯·æ£€æŸ¥è¾“å…¥ä¿¡æ¯",icon:"none"})},goToRegister(){i({url:"/pages/register/register"})}}},[["render",function(a,e,s,l,t,o){const i=r,h=p,w=g,k=_;return c(),n(i,{class:"login-container"},{default:d((()=>[u(i,{class:"header"},{default:d((()=>[u(i,{class:"app-logo"},{default:d((()=>[f("ğŸ“–")])),_:1}),u(i,{class:"app-title"},{default:d((()=>[f("è®°æ„ Parli")])),_:1}),u(i,{class:"app-subtitle"},{default:d((()=>[f("æ„å¤§åˆ©è¯­èƒŒå•è¯")])),_:1})])),_:1}),u(i,{class:"login-form"},{default:d((()=>[u(i,{class:"form-title"},{default:d((()=>[f("ç”¨æˆ·ç™»å½•")])),_:1}),u(i,{class:"input-group"},{default:d((()=>[u(i,{class:"input-label"},{default:d((()=>[u(h,{class:"input-icon"},{default:d((()=>[f("ğŸ‘¤")])),_:1}),u(h,null,{default:d((()=>[f("ç”¨æˆ·å")])),_:1})])),_:1}),u(w,{modelValue:t.formData.username,"onUpdate:modelValue":e[0]||(e[0]=a=>t.formData.username=a),class:"form-input",placeholder:"è¯·è¾“å…¥ç”¨æˆ·åï¼ˆè‡³å°‘3ä¸ªå­—ç¬¦ï¼‰",disabled:t.loading,maxlength:"20"},null,8,["modelValue","disabled"])])),_:1}),u(i,{class:"input-group"},{default:d((()=>[u(i,{class:"input-label"},{default:d((()=>[u(h,{class:"input-icon"},{default:d((()=>[f("ğŸ”’")])),_:1}),u(h,null,{default:d((()=>[f("å¯†ç ")])),_:1})])),_:1}),u(w,{modelValue:t.formData.password,"onUpdate:modelValue":e[1]||(e[1]=a=>t.formData.password=a),class:"form-input",placeholder:"è¯·è¾“å…¥å¯†ç ï¼ˆè‡³å°‘6ä¸ªå­—ç¬¦ï¼‰",password:"",disabled:t.loading,maxlength:"50"},null,8,["modelValue","disabled"])])),_:1}),u(i,{class:"form-actions"},{default:d((()=>[u(k,{class:m(["login-btn",{loading:t.loading}]),disabled:t.loading||!o.isFormValid,onClick:o.handleLogin},{default:d((()=>[t.loading?(c(),n(h,{key:0},{default:d((()=>[f("ç™»å½•ä¸­...")])),_:1})):(c(),n(h,{key:1},{default:d((()=>[f("ç™»å½•")])),_:1}))])),_:1},8,["class","disabled","onClick"]),u(i,{class:"form-links"},{default:d((()=>[u(h,{class:"link-text",onClick:o.goToRegister},{default:d((()=>[f("æ²¡æœ‰è´¦å·ï¼Ÿç«‹å³æ³¨å†Œ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),u(i,{class:"footer"},{default:d((()=>[u(h,{class:"footer-text"},{default:d((()=>[f("ç™»å½•åæ‚¨çš„å­¦ä¹ è¿›åº¦å°†è‡ªåŠ¨ä¿å­˜")])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-d25e2f80"]]);export{w as default};
